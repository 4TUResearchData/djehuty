{% extends "layout.html" %}
{% block headers %}
<script src="/static/js/jquery-3.6.0.min.js"></script>
<script src="/static/js/jquery.dataTables.min.js"></script>
<link href="/static/css/jquery.dataTables.min.css" rel="stylesheet">
<style>
#reports-table .fa-user-secret { color: #000; }
#reports-table .fa-user-secret:hover { color: #666; }
#reports-table .fa-user-secret:active { color: #999; }
#reports-table { display: none; }
#reports-table_wrapper { margin-top: 1em; }
</style>
<script>
jQuery(document).ready(function () {
    jQuery(".hide-for-javascript").removeClass("hide-for-javascript");
    jQuery("#reports-table").DataTable({
        "order": [],
        pageLength: 100,
        columnDefs: [
          {
            targets: -1,
            className: 'dt-head-left'
          }
        ],
        columns: [
          {
            className: 'dt-body-left',
          }
        ]
    });
    jQuery("#reports-table").show();
});
</script>
{% endblock %}
{% block submenu %}
<ul>
  <li><a href="/admin/reports">‚Üê Go back</a></li>
  <li><a href="/admin/dashboard">Dashboard</a>
  <li><a href="/admin/users">Users</a>
  <li><a href="/admin/maintenance">Maintenance</a>
  <li><a href="/admin/exploratory">Exploratory</a>
  <li class="active corporate-identity-submenu-active">Reports
  {% if may_query %}<li><a href="/admin/sparql">Query</a>{% endif %}
</ul>
{% endblock %}
{% block body %}
<noscript>
  <p class="no-script">Sorry, this page requires JavaScript to function properly.</p>
</noscript>
<div class="hide-for-javascript">
<h1>REPORT: Recent System Log</h1>

{%- if log_file %}
<p>log_file: {{log_file}} (based on configuration file)</p>
{%- endif %}

{%- if limit_log_size %}
<p>log_limit_size: {{limit_log_size}} bytes (read from the end of the log file. The size doesn't exceed the actual size of the log file)</p>
{%- endif %}

{%- if records %}
<p></p>
Export: <a href="/admin/reports/recent_system_log?export=1&format=csv">CSV</a>, <a href="/admin/reports/recent_system_log?export=1&format=json">JSON</a>

<table id="reports-table" class="corporate-identity-table">
  <thead><tr><th>Logs</th></thead>
  <tbody>
{%-   for record in records: %}
    <tr>
      <td>{{record["msg"]}}</td>
    </tr>
{%-   endfor %}
  </tbody>
</table>
{%- else %}
No system logs...
{%- endif %}

</div>
{% endblock %}
