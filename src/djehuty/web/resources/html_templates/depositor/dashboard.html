{% extends "layout.html" %}
{% block headers %}
<style>
#session-table tbody tr td:nth-child(2) { white-space: nowrap; }
#create-new-dataset { margin: auto; }
#create-new-collection { margin: auto; }
</style>
{% endblock %}
{% block submenu %}
<ul>
  <li class="active">Dashboard
  <li class="create-button"><a href="/my/sessions/new">Create API token</a>
  <li><a href="/my/datasets">My Datasets</a>
  <li><a href="/my/collections">My Collections</a>
</ul>
{% endblock %}
{% block body %}
<h1>Dashboard</h1>
<h2>Quick actions</h2>
<div class="center">
  <a id="create-new-dataset" href="/my/datasets/new" class="button neutral-button">Add new dataset</a>
  <a id="create-new-collection" href="/my/collections/new" class="button neutral-button">Create new collection</a>
</div>
<h2>Account statistics</h2>
<p>Using {{storage_used}} of {{quota}} ({{percentage_used}}%).</p>

<h2>Sessions and API tokens</h2>

<table id="session-table" class="branded-table">
  <thead><tr><th>Name</th><th>Created at</th><th>Actions</th></tr></thead>
  <tbody>
    {%- for session in sessions: %}
    <tr>
      <td>{% if session.editable %}
        <a href="/my/sessions/{{session.uuid}}/edit">{{session.name | default("Unnamed", False)}}</a>
        {% else %}
        {{session.name | default("Unnamed", False)}}{%- if session_token == session.token %} <span class="active-badge">Current session</span>{% endif %}
        {% endif %}
      </td>
      <td>{{session.created_date | default("Unknown", False)}}</td>
      <td>{%- if session_token != session.token %}<a href="/my/sessions/{{session.uuid}}/delete" class="fas fa-trash-can" title="Remove"></a>{% endif %}</td>
    </tr>
    {%- endfor %}
  </tbody>
</table>
{% endblock %}
