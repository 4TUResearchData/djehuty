{% extends "prefixes.sparql" %}
{% block query %}
SELECT DISTINCT ?id ?article_version_id ?url
WHERE {
  GRAPH <{{state_graph}}> {
    ?reference         rdf:type                sg:ArticleReference .
    ?reference         col:id                  ?id .
    {%- if article_version_id is not none %}
    ?reference         col:article_version_id          ?article_version_id .
    {%- endif %}{% if account_id is not none %}
    ?article           rdf:type                sg:Article .
    ?article           col:article_version_id          ?article_version_id .
    ?article           col:account_id          {{account_id}} .
    {%- endif %}
    OPTIONAL { ?reference  col:url             ?url . }
  }
  FILTER (?article_version_id = {{article_version_id}})
{%- if filters is not none %}{{ filters }}{% endif %}
}
{% endblock %}
